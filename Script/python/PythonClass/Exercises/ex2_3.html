<html>
<head>
<title>Python Training Exercises - Exercise 2.3</title>
</head>

<body>
<h1>Exercise 2.3</h1>

<table width=600 bgcolor="#e0e0ff" border=1 cellpadding=20>
<tr>
<td>
<b>Objectives:</b>
<ul>
<li>How to create formatted output such as numbers with
a fixed number of decimal places or tables with fixed-width columns.
<li>Further practice with string manipulation operations.
<li>Continued practice with writing functions.
</ul>
<p>
<b>Files Created:</b> None.

<p>
<b>Files Modified:</b> <tt>PythonClass/report.py</tt>

</td>
</tr>
</table>

<p>
<b>Creating Formatted Output</b>

<p>
In many programs, you want to produce output that is formatted
in a very specific manner.   For example, you might want to print
a table showing a summary of portfolio performance information.

<pre>
      Name     Shares      Price     Change 
---------- ---------- ---------- ---------- 
        AA        100      39.91       7.71
       IBM         50     106.11      15.01
       CAT        150      78.58      -4.86
      MSFT        200      30.47     -20.76
        GE         95      37.38      -2.99
      MSFT         50      30.47     -34.63
       IBM        100     106.11      35.67
</pre>

<p>
In the report, "Price" is the current share price of the stock
and "Change" is the change in the share price from the initial purchase price.

<p>
<b>(a) How to format numbers</b>

<p>
A common problem with printing numbers is specifying the number of decimal places. This is easily fixed
using the string formatting operator (%).  For example:

<blockquote>
<pre>
>>> <b>value = 42863.1</b>
>>> <b>print value</b>
42863.1
>>> <b>print "%0.4f" % value</b>
42863.1000
>>> <b>print "%16.2f cm" % value</b>
        42863.10 cm
>>> <b>print "%-16.2f cm" % value</b>
42863.10         cm
>>>
</pre>
</blockquote>

Try the above operations and experiment with different settings of the field width and decimal places.

<p>
Although it's commonly used with <tt>print</tt>, string formatting is not tied to printing.  If you
want to save a formatted string.  Just assign it to a variable.  For example:

<blockquote>
<pre>
>>> <b>f = "%0.4f" % value</b>
>>> <b>f</b>
'42863.1000'
>>>
</pre>
</blockquote>

<p>
<b>(b) Collecting Data</b>

<p>
In order to generate the table in the above report, you'll first want to collect all of the data
shown in the table.   Write a function <tt>make_report()</tt> that takes a list of stocks and
dictionary of prices as input and returns a list of tuples containing the rows of the above table.  Add this function to
your <tt>report.py</tt> file. Here's how it should work if you try it interactively:

<blockquote>
<pre>
>>> <b>portfolio = read_portfolio("Data/portfolio.dat")</b>
>>> <b>prices = read_prices("Data/prices.csv")</b>
>>> <b>report = make_report(portfolio,prices)</b>
>>> <b>for r in report:</b>
        <b>print r</b>

('AA', 100, 39.91, 7.71) 
('IBM', 50, 106.11, 15.01)
('CAT', 150, 78.58, -4.86)
('MSFT', 200, 30.47, -20.76)
...
>>> 
</pre>
</blockquote>

Note: The data in your program will be different than what's shown above because the
<tt>Data/prices.csv</tt> file was scraped off of a web site in an earlier exercise.

<p>
<b>(c) Printing a formatted table</b>

<p>
Redo the above for-loop, but change the print statement to format the
tuples.  For example:

<blockquote>
<pre>
>>> <b>for r in report:</b>
        <b>print "%10s %10d %10.2f %10.2f" % r</b>

        AA        100      39.91       7.71
       IBM         50     106.11      15.01
       CAT        150      78.58      -4.86
      MSFT        200      30.47     -20.76
...
>>> 
</pre>
</blockquote>

<p>
Take the above statements and add them to your <tt>report.py</tt> program.  Have your
program take the output of the <tt>make_report()</tt> function and print
a nicely formatted table as shown.

<p>
<b>(d) Adding some headers</b>

<p>
Suppose you had a tuple of header names like this:

<blockquote>
<pre>
headers = ('Name','Shares','Price','Change')
</pre>
</blockquote>

Add code to your program that takes the above tuple of headers and
creates a string where each header name is right-aligned in a
10-character wide field and each field is separated by a single space.
For example:

<pre>
'      Name     Shares      Price      Change'
</pre>

<p>
Write code that takes the headers and creates the separator string
between the headers and data to follow.  This string is just a 
bunch of "-" characters under each field name. For example:

<blockquote>
<pre>
'---------- ---------- ---------- -----------'
</pre>
</blockquote>

When you're done, your program should produce the table
shown at the top of this exercise.

<p>
<b>(e) Formatting Challenge</b>
</p>

<p>
How would you modify your code so that the price includes the currency symbol ($)
and the output appears like this:
</p>

<pre>
      Name     Shares      Price     Change 
---------- ---------- ---------- ---------- 
        AA        100     $39.91       7.71
       IBM         50    $106.11      15.01
       CAT        150     $78.58      -4.86
      MSFT        200     $30.47     -20.76
        GE         95     $37.38      -2.99
      MSFT         50     $30.47     -34.63
       IBM        100    $106.11      35.67
</pre>

<hr>
<span style="float:right">
[ <a href="prac2_3.html">PRACTICUM</a> ]
</span>

[ <a href="index.html">Index</a> | <a href="soln2_3.html">Solution</a>
| <a href="ex2_2.html">Back</a> | <a href="ex2_4.html">Next</a> ]
</body>
</html>
