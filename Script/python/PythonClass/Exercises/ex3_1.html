<html>
<head>
<title>Python Training Exercises - Exercise 3.1</title>
</head>

<body>
<h1>Exercise 3.1</h1>

<table width=600 bgcolor="#e0e0ff" border=1 cellpadding=20>
<tr>
<td>
<b>Objectives:</b>
<ul>
<li>Learn how to organize a program into a collection of functions.
<li>Bottom-up program organization.
</ul>
<p>
<b>Files Created:</b> None.

<p>
<b>Files Modified:</b> <tt>PythonClass/report.py</tt>

</td>
</tr>
</table>

<p>

In section 2, you wrote a program called <tt>report.py</tt> that printed out a
report showing the performance of a stock portfolio.   This program consisted of some
functions.  For example:


<blockquote>
<pre>
...
def read_portfolio(filename):
    '''
    Read a stock portfolio file into a list of dictionaries with keys
    name, shares, and price.
    '''
    portfolio = []
    f = open(filename)
    for line in f:
        fields = line.split()
        stock = {
             'name'   : fields[0],
             'shares' : int(fields[1]),
             'price'   : float(fields[2])
        }
        portfolio.append(stock)
    f.close()
    return portfolio
...
</pre>
</blockquote>

However, there were also portions of the program that just performed a series of scripted calculations.  This code appeared near the end
of the program.  For example:

<blockquote>
<pre>
...

# Output the report

headers = ('Name','Shares','Price','Change')
print "%10s %10s %10s %10s"  % headers
print ("-"*10 + " ")*len(headers)
for row in report:
    print "%10s %10d %10.2f %10.2f" % row
...
</pre>
</blockquote>

In this exercise, we're going take this program and organize it a little more strongly around
the use of functions.

<p>
<b>(a) Structuring a program as a collection of functions</b>

<p>
Modify your <tt>report.py</tt> program so that all major operations, including calculations and output, are carried out by a 
collection of functions.  Specifically:

<ul>
<p>
<li>Create a function <tt>print_report()</tt> that prints out the report.
<li>Change the last part of the program so that it is nothing more than a series
of function calls and no other computation.
</ul>

<p>
<b>(b) Creating a function for program execution</b>

<p>
Take the last part of your program and package it into a single function <tt>portfolio_report()</tt>.  Have the function work so that
the following function call creates the report as before:

<blockquote>
<pre>
portfolio_report("Data/portfolio.dat","Data/prices.csv")
</pre>
</blockquote>
<p>

In this final version, your program will be nothing more than a series of function definitions followed by a single function
call to <tt>portfolio_report()</tt> at the very end (which executes all of the steps involved in the program).

<p>
By turning your program into a single function, it becomes easy to run it on different inputs.  For
example, try these statements interactively after running your program:

<blockquote>
<pre>
>>> <b>portfolio_report("Data/portfolio2.dat","Data/prices.csv")</b>
... look at the output ...
>>> <b>files = ["Data/portfolio.dat","Data/portfolio2.dat"]</b>
>>> <b>for name in files:</b>
        <b>print format(name,"-^43s")</b>
        <b>portfolio_report(name, "Data/prices.csv")</b>
	<b>print</b>

... look at the output ...
>>>
</pre>
</blockquote>

<hr>
[ <a href="index.html">Index</a> | <a href="soln3_1.html">Solution</a>
| <a href="ex2_6.html">Back</a> | <a href="ex3_2.html">Next</a> ]
</body>
</html>
