<html>
<head>
<title>Python Training Exercises - Exercise 3.3</title>
</head>

<body>
<h1>Exercise 3.3</h1>

<table width=600 bgcolor="#e0e0ff" border=1 cellpadding=20>
<tr>
<td>
<b>Objectives:</b>
<ul>
<li>More on error handling and exceptions.
<li>How to properly write code that catches exceptions.
</ul>
<p>
<b>Files Created:</b> None.

<p>
<b>Files Modified:</b> <tt>PythonClass/fieldparse.py</tt>
<ul>

</td>
</tr>
</table>

<p>
In this exercise, we add some error handling to our <tt>parse()</tt> function.

<p>
<b>(a) Catching exceptions</b>

<p>
The <tt>parse()</tt> function you wrote is used to process the entire
contents of a file.  However, in the real-world, it's possible that
input files might have corrupted or dirty data.   Run your <tt>fieldparse.py</tt>
program and try it out:

<blockquote>
<pre>
>>> <b>portfolio = parse(open("Data/portfolio3.dat"),[str,int,float],['name','shares','price'])</b>
... watch what happens ...
>>>
</pre>
</blockquote>

<p>
Modify the <tt>parse()</tt> function
to catch all <tt>ValueError</tt> exceptions generated during record creation
and print a warning message for lines that can't be parsed.  The warning
message should include the line number and information about the reason why parsing failed.
</p>

<p>
To test your function, try reading the
file <tt>Data/portfolio3.dat</tt>.  This file contains stock
portfolio data, but some of the entries have unavailable data for
certain fields (denoted by "-").  Those lines should result in a warning
messages, but should otherwise be ignored by your function.
For example:

<blockquote>
<pre>
>>> <b>portfolio = parse(open("Data/portfolio3.dat"),[str,int,float],['name','shares','price'])</b>
Line 4: Couldn't parse: C - 53.08
Line 4: Reason invalid literal for int() with base 10: '-'
Line 7: Couldn't parse: DIS - 34.20
Line 7: Reason invalid literal for int() with base 10: '-'
Line 8: Couldn't parse: GE - 37.23
Line 8: Reason invalid literal for int() with base 10: '-'
Line 9: Couldn't parse: GM - 31.44
Line 9: Reason invalid literal for int() with base 10: '-'
Line 13: Couldn't parse: INTC - 21.84
Line 13: Reason invalid literal for int() with base 10: '-'
... more warnings about bad lines ...
>>> <b>portfolio</b>
... inspect the portfolio ...
>>>
</pre>
</blockquote>

<p>
<b>(b) Challenge: Silencing Errors</b>
</p>

<p>
Modify the <tt>parse()</tt> function so that parsing error messages
can be silenced if desired by the user.
</p>

<hr>

<span style="float:right">
[ <a href="prac3_3.html">PRACTICUM</a> ]
</span>

[ <a href="index.html">Index</a> | <a href="soln3_3.html">Solution</a>
| <a href="ex3_2.html">Back</a> | <a href="ex4_1.html">Next</a>  ]

</body>
</html>
