<html>
<head>
<title>Python Training Exercises - Exercise 6.2</title>
</head>

<body>
<h1>Exercise 6.2</h1>

<table width=600 bgcolor="#e0e0ff" border=1 cellpadding=20>
<tr>
<td>
<b>Objectives:</b>
<ul>
<li>See how to restrict the set of object attribute names using slots.
<li>How to better control access to object attributes through the use of property functions.
</ul>
<p>
<b>Files Created:</b> None

<p>
<b>Files Modified:</b> <tt>PythonClass/stock.py</tt>

</td>
</tr>
</table>

<P>
<b>(a) Slots</b>

<p>
In Exercise 5.1, you created an object <tt>Stock</tt>.  Try adding
a <tt>__slots__</tt> specification on <tt>Stock</tt> that restricts
the set of valid attribute names.  Now, try setting new attributes on
the object:

<blockquote>
<pre>
>>> ================================ RESTART ================================
>>> <b>from stock import Stock</b>
>>> <b>s = Stock('GOOG',100,490.10)</b>
>>> <b>s.name</b>
'GOOG'
>>> <b>s.blah = 42</b>
... see what happens ...
>>>
</pre>
</blockquote>

<p>
When you use <tt>__slots__</tt>, Python actually uses a more efficient 
internal representation of objects.   What happens if you try to 
inspect the underlying dictionary of <tt>s</tt> above?

<blockquote>
<pre>
>>> <b>s.__dict__</b>
... see what happens ...
>>>
</pre>
</blockquote>

<p>
It should be noted that <tt>__slots__</tt> is most commonly used as an
optimization on classes that serve as data structures.  Using slots
will make such programs use far-less memory and run a bit faster.

<p>
<b>(b) Properties</b>

<p>
Properties are a useful way to add "computed attributes" to an object.
Notice that on your object there is a slight inconsistency in how different
kinds of data are extracted:

<blockquote>
<pre>
>>> <b>s.shares</b>
100
>>> <b>s.price</b>
490.1
>>> <b>s.cost()</b>
49010.0
>>>
</pre>
</blockquote>

Specifically, notice how you have to add the extra () to <tt>cost</tt> because it is a method.

<p>
You can get rid of the extra () on <tt>cost()</tt> if you turn it into a property.   
Take your <tt>Stock</tt> class and modify it so that the cost calculation works like this:

<blockquote>
<pre>
>>> <b>s.cost</b>
49010.0
>>>
</pre>
</blockquote>

<p>
Try calling <tt>s.cost()</tt> as a function and observe that it
doesn't work now that <tt>cost</tt> has been defined as a property.</p>

<blockquote>
<pre>
>>> <b>s.cost()</b>
... fails ...
>>>
</pre>
</blockquote>

<p>
<b>(c) Properties and Private Data</b>

<p>
Modify the <tt>Stock</tt> class so that the <tt>name</tt> attribute is 
read-only.   To do this, use a private
attribute <tt>_name</tt> to hold the value and define a property <tt>name</tt> to return the value.
After these changes, your class should work like this:</p>

<blockquote>
<pre>
>>> <b>s = Stock('GOOG',100,490.10)</b>
>>> <b>s.name = 'IBM'</b>
Traceback (most recent call last):
  File "&lt;stdin>", line 1, in &lt;module>
AttributeError: can't set attribute
>>>
</pre>
</blockquote>

<p>
Also modify the <tt>shares</tt> attribute so that the value is stored in a
private attribute and that a pair of property functions are used to ensure
that it is always set to an integer value.  Here is an example of the expected
behavior:
</p>

<blockquote>
<pre>
>>> <b>s = Stock('GOOG',100,490.10)</b>
>>> <b>s.shares = 50</b>
>>> <b>s.shares = 45.5</b>
Traceback (most recent call last):
  File "&lt;stdin>", line 1, in &lt;module>
TypeError: expected an integer
>>>
</pre>
</blockquote>

<hr>
[ <a href="index.html">Index</a> | <a href="soln6_2.html">Solution</a>
| <a href="ex6_1.html">Back</a> | <a href="ex7_1.html">Next</a> ]
</body>
</html>
