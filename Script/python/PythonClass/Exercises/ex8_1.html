<html>
<head>
<title>Python Training Exercises - Exercise 8.1</title>
</head>

<body>
<h1>Exercise 8.1</h1>

<table width=600 bgcolor="#e0e0ff" border=1 cellpadding=20>
<tr>
<td>
<b>Objectives:</b>
<ul>
<li>Understand the inner workings of the for-loop.
<li>Discover why the for-loop is able to iterate over so many different kinds of
objects such as lists, tuples, dictionaries, files, etc.
</ul>
<p>
<b>Files Created:</b> <tt>portfolio.py</tt>

<p>
<b>Files Modified:</b> None

</td>
</tr>
</table>

<p>
<b>(a) Iteration Illustrated</b>
</p>

<p>

Create the following list:

<blockquote>
<pre>
a = [1,9,4,25,16]
</pre>
</blockquote>

Manually iterate over this list.  Call <tt>__iter__()</tt> to get an iterator and
call the <tt>next()</tt> method to obtain successive elements.

<blockquote>
<pre>
>>> <b>i = a.__iter__()</b>
>>> <b>i</b>
&lt;listiterator object at 0x64c10&gt;
>>> <b>i.next()</b>
1
>>> <b>i.next()</b>
9
>>> <b>i.next()</b>
4
>>> <b>i.next()</b>
25
>>> <b>i.next()</b>
16
>>> <b>i.next()</b>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in <module>
StopIteration
>>>
</pre>
</blockquote>

<p>
The <tt>next()</tt> built-in function is just a shortcut for calling
the <tt>next()</tt> method of an iterator. Try using it on a file:</p>

<blockquote>
<pre>
>>> <b>f = open("Data/portfolio.dat")</b>
>>> <b>next(f)</b>
'AA 100 32.20\n'
>>> <b>next(f)</b>
'IBM 50 91.10\n'
>>>
</pre>
</blockquote>

<p>
Keep calling <tt>next(f)</tt> until you reach the end of the
file. Watch what happens.</p>

<p>
<b>(b) Supporting Iteration</b>
</p>

<p>
Make a file <tt>portfolio.py</tt> and put the following class in it.
</p>

<blockquote>
<table><tr><td><pre>
# portfolio.py
import stock

class Portfolio(object):
    def __init__(self,filename=None):
        if filename:
             self.holdings = stock.read_portfolio(filename)
        else:
             self.holdings = []
    def cost(self):
        return sum([s.shares*s.price for s in self.holdings])
</pre></td></tr></table>
</blockquote>

<p>
Now, modify the class so that you can iterate over the contents of the
portfolio like this:
</p>

<blockquote>
<pre>
>>> <b>port = Portfolio("Data/portfolio.dat")</b>
>>> <b>for s in port:
       print s</b>

Stock('AA',100,32.20)
Stock('IBM',50,91.10)
Stock('CAT',150,83.44)
Stock('MSFT',200,51.23)
Stock('GE',95,40.37)
Stock('MSFT',50,65.10)
Stock('IBM',100,70.44)
>>>
</pre>
</blockquote>

<hr>
[ <a href="index.html">Index</a> | <a href="soln8_1.html">Solution</a>
| <a href="ex7_3.html">Back</a> | <a href="ex8_2.html">Next</a> ]
</body>
</html>
