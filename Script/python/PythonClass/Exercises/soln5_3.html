<html>
<head>
<title>Python Training Exercises</title>
</head>

<body>
<h1>Exercise 5.3 - Solution</h1>

<b>(a) Better output for printing objects</b>

<pre>
# stock.py

class Stock(object):
    '''
    An instance of a stock holding consisting of name, shares, and price.
    '''
    def __init__(self,name,shares,price):
        self.name   = name
        self.shares = shares
        self.price  = price

<font color="#0000ff">    def __repr__(self):
        return "Stock(%r,%r,%r)" % (self.name, self.shares, self.price)</font>

    def cost(self):
        '''
        Return the cost as shares*price
        '''
        return self.shares*self.price

    def sell(self,nshares):
        '''
        Sell a number of shares and return the remaining number.
        '''
        self.shares -= nshares
        return self.shares
...
</pre>

<hr>
<b>(b) Creating a Mapping Object</b>

<pre>
# curprice.py

import urllib

class CurrentPrices(object):
    '''
    An object that returns current stock prices when accessed as a mapping.
    '''
    def __getitem__(self,name):
        request = "http://finance.yahoo.com/d/quotes.csv?s=%s&f=l1" % name
        u = urllib.urlopen(request)
        price = float(u.read())
        return price
</pre>

<hr>
<b>(c) An example of using getattr()</b>

<pre>
# printobj.py

def print_objects(objects,attrs):
    '''                                                                                                                    
    Make a nicely formatted table from a list of objects and attribute names.                                              
    '''
    for aname in attrs:
        print "%10s" % aname,
    print
    print ("-"*10 + " ")*len(attrs)
    for obj in objects:
        for aname in attrs:
            print "%10s" % getattr(obj,aname,"UNDEF"),
        print
</pre>


<hr>
[ <a href="ex5_3.html">Back</a> ]
</body>
</html>
