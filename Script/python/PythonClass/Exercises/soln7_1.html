<html>
<head>
<title>Python Training Exercises</title>
</head>

<body>
<h1>Exercise 7.1 - Solution</h1>

<p>
<b>(b) Testing the Documentation</b>
</p>

<p>
Here is a fixed version of <tt>simple.py</tt> with better doc
strings.   For documentation involving floating point numbers,
you should try to pick examples where results have decimals that
can be exactly represented in base-2 as this will avoid output
that shows minor inaccuracies such as "1.39999999999999".   In
the solution, I have changed the example to produce a result
such as "5.5" or "1.5" because 0.5 is exact.</p>

<pre>
# simple.py

def add(x,y):
    """Adds x and y together.  For example:

       >>> add(2,3)
       5
       >>> add("Hello","World")
       'HelloWorld'
       >>> add(2.1,3.4)
       5.5
       >>>
    """
    return x+y

def sub(x,y):
    """Subtracts y from x.  For example:

       >>> sub(3,2)
       1
       >>> sub(2.6,1.1)
       1.5
       >>>
    """
    return x-y

if __name__ == '__main__':
    import doctest
    doctest.testmod()
</pre>

<hr>

<p>
<b>(c) Writing Unit Tests</b>
</p>

<pre>
# testsimple.py

import simple
import unittest

class TestAdd(unittest.TestCase):
    def testint(self):
        r = simple.add(2,3)
        self.assertEquals(r,5)
    def teststr(self):
        r = simple.add("Hello","World")
        self.assertEquals(r,"HelloWorld")
    def testfloat(self):
        r = simple.add(2.1,3.4)
        self.assertEquals(r,5.5)

class TestSub(unittest.TestCase):
    def testint(self):
        r = simple.sub(3,2)
        self.assertEquals(r,1)
    def testfloat(self):
        r = simple.sub(2.6,1.1)
        self.assertEquals(r,1.5)

if __name__ == '__main__':
    unittest.main()
</pre>

<hr>

<p>
<b>(d) Checking for Errors</b>
</p>

<pre>
# testsimple.py

import simple
import unittest

class TestAdd(unittest.TestCase):
    def testint(self):
        r = simple.add(2,3)
        self.assertEquals(r,5)
    def teststr(self):
        r = simple.add("Hello","World")
        self.assertEquals(r,"HelloWorld")
    def testfloat(self):
        r = simple.add(2.1,3.4)
        self.assertEquals(r,5.5)
<font color="#0000ff">    def testTypeError(self):
        self.assertRaises(TypeError,simple.add,3,"Hello")
    def testTypeErrorMessage(self):
        try:
            simple.add(3,"Hello")
        except TypeError as e:
            self.assertEquals(str(e),"unsupported operand type(s) for +: 'int' and 'str'")</font>

class TestSub(unittest.TestCase):
    def testint(self):
        r = simple.sub(3,2)
        self.assertEquals(r,1)
    def testfloat(self):
        r = simple.sub(2.6,1.1)
        self.assertEquals(r,1.5)

if __name__ == '__main__':
    unittest.main()
</pre>

<hr>

[ <a href="ex7_1.html">Back</a> ]
</body>
</html>
